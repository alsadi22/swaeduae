<?php
namespace App\Providers;

use Illuminate\Support\ServiceProvider;
use Illuminate\Routing\Router;

class SwaeMiddlewareServiceProvider extends ServiceProvider
{
    public function register() {}
    public function boot(Router $router)
    {
        // 1) Set locale + headers first
        if (class_exists(\App\Http\Middleware\SetLocaleAndHeaders::class)) {
            $router->pushMiddlewareToGroup('web', \App\Http\Middleware\SetLocaleAndHeaders::class);
        }
        // 2) Then micro-cache (keys by locale already set)
        if (class_exists(\App\Http\Middleware\MicroCache::class)) {
            $router->pushMiddlewareToGroup('web', \App\Http\Middleware\MicroCache::class);
        }
    }
}
